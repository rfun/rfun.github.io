<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Input Variable Analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Predicting Surface Runoff</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Introduction</a>
</li>
<li>
  <a href="collinearity.html">Collinearity Analysis</a>
</li>
<li>
  <a href="input.html">Input Variable Analysis</a>
</li>
<li>
  <a href="results.html">Model Results</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Input Variable Analysis</h1>

</div>


<p>From this point onwards, we will only be considering the non-collinear variables for our analysis. As we can see below, after removing the collinear variables we are left with 21 predictor variables.</p>
<pre class="r"><code>library(tidyverse)
library(ggplot2)
library(plotly)

main_data_file = read_csv(&#39;data_monthly.csv&#39;, col_names=TRUE)

#Remove the columns that are not required. 
subset_data = select(main_data_file,-c(2,11,24,7,9,29,28))
colnames(subset_data)</code></pre>
<pre><code>##  [1] &quot;DateTime&quot;                                 
##  [2] &quot;Canopy Water Amount&quot;                      
##  [3] &quot;Downward Heat Flux In Soil&quot;               
##  [4] &quot;Evaporation Flux From Canopy&quot;             
##  [5] &quot;Evaporation Flux From Soil&quot;               
##  [6] &quot;Precipitation Flux&quot;                       
##  [7] &quot;Root Zone Soil Moisture&quot;                  
##  [8] &quot;Soil Temperature&quot;                         
##  [9] &quot;Specific Humidity&quot;                        
## [10] &quot;Subsurface Runoff Amount&quot;                 
## [11] &quot;Surface Air Pressure&quot;                     
## [12] &quot;Surface Albedo&quot;                           
## [13] &quot;Surface Downwelling Longwave Flux In Air&quot; 
## [14] &quot;Surface Downwelling Shortwave Flux In Air&quot;
## [15] &quot;Surface Net Downward Longwave Flux&quot;       
## [16] &quot;Surface Net Downward Shortwave Flux&quot;      
## [17] &quot;Surface Runoff Amount&quot;                    
## [18] &quot;Surface Snow Amount&quot;                      
## [19] &quot;Surface Snow Melt Amount&quot;                 
## [20] &quot;Surface Temperature&quot;                      
## [21] &quot;Surface Upward Latent Heat Flux&quot;          
## [22] &quot;Surface Upward Sensible Heat Flux&quot;        
## [23] &quot;Wind Speed&quot;</code></pre>
<p>We are also going to do some cleanup in order to get the names of the columns without spaces so that we may refer to them in our code.</p>
<pre class="r"><code>names(subset_data)&lt;-str_replace_all(names(subset_data), c(&quot; &quot; = &quot;.&quot; , &quot;,&quot; = &quot;&quot; ))
colnames(subset_data)</code></pre>
<pre><code>##  [1] &quot;DateTime&quot;                                 
##  [2] &quot;Canopy.Water.Amount&quot;                      
##  [3] &quot;Downward.Heat.Flux.In.Soil&quot;               
##  [4] &quot;Evaporation.Flux.From.Canopy&quot;             
##  [5] &quot;Evaporation.Flux.From.Soil&quot;               
##  [6] &quot;Precipitation.Flux&quot;                       
##  [7] &quot;Root.Zone.Soil.Moisture&quot;                  
##  [8] &quot;Soil.Temperature&quot;                         
##  [9] &quot;Specific.Humidity&quot;                        
## [10] &quot;Subsurface.Runoff.Amount&quot;                 
## [11] &quot;Surface.Air.Pressure&quot;                     
## [12] &quot;Surface.Albedo&quot;                           
## [13] &quot;Surface.Downwelling.Longwave.Flux.In.Air&quot; 
## [14] &quot;Surface.Downwelling.Shortwave.Flux.In.Air&quot;
## [15] &quot;Surface.Net.Downward.Longwave.Flux&quot;       
## [16] &quot;Surface.Net.Downward.Shortwave.Flux&quot;      
## [17] &quot;Surface.Runoff.Amount&quot;                    
## [18] &quot;Surface.Snow.Amount&quot;                      
## [19] &quot;Surface.Snow.Melt.Amount&quot;                 
## [20] &quot;Surface.Temperature&quot;                      
## [21] &quot;Surface.Upward.Latent.Heat.Flux&quot;          
## [22] &quot;Surface.Upward.Sensible.Heat.Flux&quot;        
## [23] &quot;Wind.Speed&quot;</code></pre>
<pre class="r"><code># ensure no empty rows are used
subset_data = subset_data[complete.cases(subset_data), ]</code></pre>
<p>Finally, we can now run a basic <code>Linear Regression</code> model using the <code>lm</code> function provided by R</p>
<pre class="r"><code>fit1&lt;- lm(Surface.Runoff.Amount~Canopy.Water.Amount+Downward.Heat.Flux.In.Soil+Evaporation.Flux.From.Canopy+Evaporation.Flux.From.Soil+Precipitation.Flux+Root.Zone.Soil.Moisture+Soil.Temperature+Specific.Humidity+Subsurface.Runoff.Amount+Surface.Air.Pressure+Surface.Albedo+Surface.Downwelling.Longwave.Flux.In.Air+Surface.Downwelling.Shortwave.Flux.In.Air+Surface.Net.Downward.Longwave.Flux+Surface.Net.Downward.Shortwave.Flux+Surface.Runoff.Amount+Surface.Snow.Amount+Surface.Snow.Melt.Amount+Surface.Temperature+Surface.Upward.Latent.Heat.Flux+Surface.Upward.Sensible.Heat.Flux+Wind.Speed, data = subset_data
)
summary(fit1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Surface.Runoff.Amount ~ Canopy.Water.Amount + Downward.Heat.Flux.In.Soil + 
##     Evaporation.Flux.From.Canopy + Evaporation.Flux.From.Soil + 
##     Precipitation.Flux + Root.Zone.Soil.Moisture + Soil.Temperature + 
##     Specific.Humidity + Subsurface.Runoff.Amount + Surface.Air.Pressure + 
##     Surface.Albedo + Surface.Downwelling.Longwave.Flux.In.Air + 
##     Surface.Downwelling.Shortwave.Flux.In.Air + Surface.Net.Downward.Longwave.Flux + 
##     Surface.Net.Downward.Shortwave.Flux + Surface.Runoff.Amount + 
##     Surface.Snow.Amount + Surface.Snow.Melt.Amount + Surface.Temperature + 
##     Surface.Upward.Latent.Heat.Flux + Surface.Upward.Sensible.Heat.Flux + 
##     Wind.Speed, data = subset_data)
## 
## Residuals:
##        Min         1Q     Median         3Q        Max 
## -0.0066020 -0.0009691 -0.0000607  0.0007764  0.0255575 
## 
## Coefficients:
##                                             Estimate Std. Error t value
## (Intercept)                                8.966e-02  1.315e-01   0.682
## Canopy.Water.Amount                       -1.465e-03  3.981e-03  -0.368
## Downward.Heat.Flux.In.Soil                -8.180e-04  1.036e-03  -0.790
## Evaporation.Flux.From.Canopy              -1.016e-04  1.035e-04  -0.982
## Evaporation.Flux.From.Soil                -3.194e-04  7.499e-05  -4.259
## Precipitation.Flux                         1.810e+02  6.029e+01   3.002
## Root.Zone.Soil.Moisture                    5.982e-05  8.488e-06   7.048
## Soil.Temperature                           2.522e-03  7.419e-04   3.399
## Specific.Humidity                         -6.628e-01  4.682e-01  -1.416
## Subsurface.Runoff.Amount                   8.595e-03  5.575e-02   0.154
## Surface.Air.Pressure                      -9.417e-07  5.206e-07  -1.809
## Surface.Albedo                            -2.329e-04  7.629e-05  -3.053
## Surface.Downwelling.Longwave.Flux.In.Air   9.683e-05  1.124e-04   0.862
## Surface.Downwelling.Shortwave.Flux.In.Air  3.705e-04  6.198e-05   5.979
## Surface.Net.Downward.Longwave.Flux         8.953e-04  9.859e-04   0.908
## Surface.Net.Downward.Shortwave.Flux        5.491e-04  1.053e-03   0.522
## Surface.Snow.Amount                       -3.655e-04  7.282e-05  -5.020
## Surface.Snow.Melt.Amount                   6.197e-03  3.121e-02   0.199
## Surface.Temperature                       -2.673e-03  1.027e-03  -2.603
## Surface.Upward.Latent.Heat.Flux           -1.010e-03  1.035e-03  -0.975
## Surface.Upward.Sensible.Heat.Flux         -9.963e-04  1.034e-03  -0.964
## Wind.Speed                                 2.655e-04  3.926e-04   0.676
##                                           Pr(&gt;|t|)    
## (Intercept)                               0.496273    
## Canopy.Water.Amount                       0.713220    
## Downward.Heat.Flux.In.Soil                0.430743    
## Evaporation.Flux.From.Canopy              0.327355    
## Evaporation.Flux.From.Soil                3.30e-05 ***
## Precipitation.Flux                        0.003066 ** 
## Root.Zone.Soil.Moisture                   3.75e-11 ***
## Soil.Temperature                          0.000833 ***
## Specific.Humidity                         0.158596    
## Subsurface.Runoff.Amount                  0.877636    
## Surface.Air.Pressure                      0.072144 .  
## Surface.Albedo                            0.002613 ** 
## Surface.Downwelling.Longwave.Flux.In.Air  0.390040    
## Surface.Downwelling.Shortwave.Flux.In.Air 1.18e-08 ***
## Surface.Net.Downward.Longwave.Flux        0.365024    
## Surface.Net.Downward.Shortwave.Flux       0.602491    
## Surface.Snow.Amount                       1.24e-06 ***
## Surface.Snow.Melt.Amount                  0.842802    
## Surface.Temperature                       0.010011 *  
## Surface.Upward.Latent.Heat.Flux           0.330698    
## Surface.Upward.Sensible.Heat.Flux         0.336329    
## Wind.Speed                                0.499672    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.003023 on 180 degrees of freedom
## Multiple R-squared:  0.6742, Adjusted R-squared:  0.6362 
## F-statistic: 17.74 on 21 and 180 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>In this result we can see that there are a few variables with very low significance to the solution. So we are going to eliminate them and try re running the model. Comparing the two R<sup>2</sup> values will tell us if the model performs better or not. So we are going to remove the following variables:</p>
<ul>
<li>Canopy.Water.Amount</li>
<li>Downward.Heat.Flux.In.Soil</li>
<li>Evaporation.Flux.From.Canopy</li>
<li>Evaporation.Flux.From.Soil</li>
<li>Specific.Humidity</li>
<li>Subsurface.Runoff.Amount</li>
<li>Surface.Downwelling.Longwave.Flux.In.Air</li>
<li>Surface.Net.Downward.Longwave.Flux</li>
<li>Surface.Net.Downward.Shortwave.Flux</li>
<li>Surface.Snow.Melt.Amount</li>
<li>Surface.Upward.Latent.Heat.Flux</li>
<li>Surface.Upward.Sensible.Heat.Flux</li>
<li>Wind.Speed</li>
</ul>
<p>In order to do that, we can simply eliminate them from our lm analysis function. This leaves us with 9 predictor variables.</p>
<pre class="r"><code>fit1&lt;- lm(Surface.Runoff.Amount~Precipitation.Flux+Root.Zone.Soil.Moisture+Soil.Temperature+Surface.Air.Pressure+Surface.Albedo+Surface.Downwelling.Shortwave.Flux.In.Air+Surface.Runoff.Amount+Surface.Snow.Amount+Surface.Temperature, data = subset_data
)
summary(fit1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Surface.Runoff.Amount ~ Precipitation.Flux + Root.Zone.Soil.Moisture + 
##     Soil.Temperature + Surface.Air.Pressure + Surface.Albedo + 
##     Surface.Downwelling.Shortwave.Flux.In.Air + Surface.Runoff.Amount + 
##     Surface.Snow.Amount + Surface.Temperature, data = subset_data)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.007463 -0.001717 -0.000046  0.001078  0.035629 
## 
## Coefficients:
##                                             Estimate Std. Error t value
## (Intercept)                               -8.389e-02  5.225e-02  -1.606
## Precipitation.Flux                         7.372e+00  4.266e+01   0.173
## Root.Zone.Soil.Moisture                    4.997e-05  7.085e-06   7.053
## Soil.Temperature                           1.489e-04  6.903e-04   0.216
## Surface.Air.Pressure                      -2.601e-07  5.798e-07  -0.449
## Surface.Albedo                             2.514e-04  6.003e-05   4.188
## Surface.Downwelling.Shortwave.Flux.In.Air -2.701e-05  9.312e-06  -2.901
## Surface.Snow.Amount                       -1.578e-04  8.048e-05  -1.961
## Surface.Temperature                        2.082e-04  6.852e-04   0.304
##                                           Pr(&gt;|t|)    
## (Intercept)                                0.11001    
## Precipitation.Flux                         0.86299    
## Root.Zone.Soil.Moisture                   3.05e-11 ***
## Soil.Temperature                           0.82941    
## Surface.Air.Pressure                       0.65419    
## Surface.Albedo                            4.28e-05 ***
## Surface.Downwelling.Shortwave.Flux.In.Air  0.00415 ** 
## Surface.Snow.Amount                        0.05134 .  
## Surface.Temperature                        0.76156    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.004023 on 193 degrees of freedom
## Multiple R-squared:  0.3811, Adjusted R-squared:  0.3555 
## F-statistic: 14.86 on 8 and 193 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>As we can see that after removing those variables that the LM model considers as insignificant, our model results got worse. So we are going to keep those variables in for our final analysis.</p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
